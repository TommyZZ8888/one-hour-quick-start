环境准备：

- Centos 7.4+
- 可访问联网
- 关闭防火墙

```bash
sudo systemctl stop firewalld
sudo systemctl disable firewalld
```

#### 1.使用yum安装

```bash
sudo yum install yum-utils net-tools
```

```bash
cat > /etc/yum.repos.d/nginx.repo << EOF
[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/\$releasever/\$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
EOF
```

```bash
sudo yum install nginx
```

#### 2.常用命令

```bash
nginx 

#立即停止
nginx -s stop

#执行完当前请求再停止
nginx -s quit

#重新加载配置文件，相当于restart
nginx -s reload

#将日志写入一个新的文件
nginx -s reopen

#测试配置文件
nginx -t
```

日志位于`/var/log/nginx/`

#### 3.使用systemctl启动、停止、重新加载

> 注意：在centos 7中，用systemctl启动nginx可能出现如下错误，
> nginx: [emerg] bind() to 0.0.0.0:8000 failed (13: Permission denied)
> 这是由于selinux的安全策略引起的。解决方法如下：
> 
> - setenforce 0 （临时）
> - 修改/etc/selinux/config，设置SELINUX=disabled （永久有效，需重启）

```bash
systemctl start nginx

systemctl status nginx

#产看日志
journalctl -xe

systemctl stop nginx

systemctl reload nginx

#配置开机启动
systemctl enable nginx
```

#### 4.配置文件

配置文件位于 /etc/nginx/nginx.conf , 下列命令会引用/etc/nginx/conf.d目录下所有的.conf文件，这样可以保持主配置文件的简洁，同时配个多个.conf文件方便区分，增加可读性。

```nginx
include /etc/nginx/conf.d/*.conf;
```

默认配置/etc/nginx/conf.d/default.conf

```nginx
server {
    listen       80; #监听端口
    server_name  localhost;

    location / {
        root   /usr/share/nginx/html; #根目录
        index  index.html index.htm; #首页
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
```

#### 5.配置文件结构

```nginx
http {

  server{#虚拟主机
     
    location {
      listen 80；
      server_name localhost;
    }
    location {
       
    }
      
  }

  server{
  
  }

}
```

参考文档：
[https://nginx.org/en/linux_packages.html](https://nginx.org/en/linux_packages.html)<br/>
[https://nginx.org/en/docs/beginners_guide.html#control](https://nginx.org/en/docs/beginners_guide.html#control)

